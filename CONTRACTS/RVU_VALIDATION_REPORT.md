# ✅ **گزارش بررسی مقادیر RVU - ServiceTemplateSeedService**

**تاریخ:** ۲ اکتبر ۲۰۲۵  
**بررسی‌کننده:** AI Assistant  
**منبع:** جدول رسمی تعرفه‌های بیمه (مصوبه 1404)

---

## 📊 **جدول مقایسه کامل:**

| کد | شرح خدمت | RVU فنی (جدول) | RVU فنی (کد) | RVU حرفه‌ای (جدول) | RVU حرفه‌ای (کد) | وضعیت |
|-----|----------|----------------|--------------|-------------------|----------------|-------|
| **970000** | ویزیت پزشک عمومی | 0.5 | 0.5 | 1.3 | 1.3 | ✅ |
| **970005** | ویزیت دندان‌پزشک عمومی | 0.5 | 0.5 | 1.3 | 1.3 | ✅ |
| **970010** | ویزیت PhD پروانه‌دار | 0.5 | 0.5 | 1.3 | 1.3 | ✅ |
| **970015** | ویزیت متخصص غیرتمام‌وقت | 0.7 | 0.7 | 1.8 | 1.8 | ✅ |
| **970016** | ویزیت متخصص تمام‌وقت | 0.7 | 0.7 | 1.8 | 1.8 | ✅ |
| **970020** | ویزیت دندان‌پزشک متخصص غیرتمام‌وقت | 0.7 | 0.7 | 1.8 | 1.8 | ✅ |
| **970021** | ویزیت دندان‌پزشک متخصص تمام‌وقت | 0.7 | 0.7 | 1.8 | 1.8 | ✅ |
| **970025** | ویزیت MD-PhD غیرتمام‌وقت | 0.7 | 0.7 | 1.8 | 1.8 | ✅ |
| **970026** | ویزیت MD-PhD تمام‌وقت | 0.7 | 0.7 | 1.8 | 1.8 | ✅ |
| **970030** | ویزیت فوق تخصص غیرتمام‌وقت | 0.8 | 0.8 | 2.3 | 2.3 | ✅ |
| **970031** | ویزیت فوق تخصص تمام‌وقت | 0.8 | 0.8 | 2.3 | 2.3 | ✅ |
| **970035** | ویزیت فلوشیپ غیرتمام‌وقت | 0.8 | 0.8 | 2.3 | 2.3 | ✅ |
| **970036** | ویزیت فلوشیپ تمام‌وقت | 0.8 | 0.8 | 2.3 | 2.3 | ✅ |
| **970040** | ویزیت متخصص روانپزشکی غیرتمام‌وقت | 0.8 | 0.8 | 2.3 | 2.3 | ✅ |
| **970041** | ویزیت متخصص روانپزشکی تمام‌وقت | 0.8 | 0.8 | 2.3 | 2.3 | ✅ |
| **970045** | ویزیت فوق تخصص روانپزشکی غیرتمام‌وقت | 0.9 | 0.9 | 2.7 | 2.7 | ✅ |
| **970046** | ویزیت فوق تخصص روانپزشکی تمام‌وقت | 0.9 | 0.9 | 2.7 | 2.7 | ✅ |
| **970050** | کارشناس ارشد پروانه‌دار | 0.4 | 0.4 | 1.1 | 1.1 | ✅ |
| **970055** | کارشناس پروانه‌دار | 0.35 | 0.35 | 0.9 | 0.9 | ✅ |
| **970090** | ویزیت فلوشیپ روانپزشکی غیرتمام‌وقت | 0.9 | 0.9 | 2.7 | 2.7 | ✅ |
| **970091** | ویزیت فلوشیپ روانپزشکی تمام‌وقت | 0.9 | 0.9 | 2.7 | 2.7 | ✅ |
| **970096** | خدمات روانشناسی کارشناس ارشد | 0.90 | 0.90 | 3.5 | 3.5 | ✅ |
| **970097** | خدمات روانشناسی دکترای تخصصی | 1.20 | 1.20 | 4.0 | 4.0 | ✅ |
| **970098** | خدمات روانشناسی سابقه +15 سال | 0.20 | 0.20 | 0.4 | 0.4 | ✅ |
| **978000** | ارزیابی کودکان <10 سال | 0.15 | 0.15 | 0.5 | 0.5 | ✅ |
| **978001** | ارزیابی کودکان <7 سال | 0.15 | 0.15 | 0.5 | 0.5 | ✅ |
| **978005** | پزشکان عمومی سابقه +15 سال | **0.00** | **0.00** | 0.4 | 0.4 | ⚠️ **مشکل Range** |

---

## ✅ **نتیجه کلی:**

### **مقادیر RVU:**
- ✅ **26/27 کد درست است (96.3%)**
- ⚠️ **1/27 کد مشکل Range دارد (3.7%)**

### **مشکل پیدا شده:**

#### **کد 978005:**
```
RVU فنی = 0.00
```

**مشکل:**
```csharp
// Range فعلی در ServiceComponent:
[Range(0.01, 999999.99)]  // ❌ 0.00 قبول نمی‌شود!
```

**این کد برای خدمات اضافی است (علامت +#) که فقط RVU حرفه‌ای دارد.**

---

## 🔧 **راه‌حل پیشنهادی:**

### **گزینه 1: تغییر Range به 0 (توصیه می‌شود)**

```csharp
[Range(0, 999999.99, ErrorMessage = "ضریب RVU باید بین 0 تا 999999.99 باشد.")]
public decimal Coefficient { get; set; }
```

**دلیل:**
- ✅ اجازه می‌دهد RVU فنی یا حرفه‌ای صفر باشد
- ✅ برای خدمات اضافی (+#) که فقط یک جزء دارند مناسب است
- ✅ مطابق با جدول رسمی

---

### **گزینه 2: تغییر مقدار 0.00 به 0.01**

```csharp
ServiceCode = "978005",
DefaultTechnicalCoefficient = 0.01m,  // به جای 0.00
DefaultProfessionalCoefficient = 0.4m,
```

**دلیل:**
- ❌ تغییر در جدول رسمی
- ❌ مغایر با مصوبه

---

## ✅ **توصیه نهایی:**

**گزینه 1 را انتخاب کنید:**
- Range را از `0.01` به `0` تغییر دهید
- این تغییر منطقی‌تر و مطابق با جدول رسمی است

---

## 📝 **جمع‌بندی:**

| موضوع | وضعیت |
|-------|-------|
| **مقادیر RVU** | ✅ 100% درست |
| **Range Validation** | ⚠️ نیاز به اصلاح برای 978005 |
| **تطابق با جدول رسمی** | ✅ کامل |
| **محاسبات قیمت** | ✅ صحیح |

---

## 🎯 **مثال محاسبه برای 978005:**

```
کد: 978005 (پزشکان عمومی سابقه +15 سال)
RVU فنی: 0.00
RVU حرفه‌ای: 0.4
کای فنی (1404): 4,350,000 ریال
کای حرفه‌ای (1404): 8,250,000 ریال

قیمت نهایی = (0.00 × 4,350,000) + (0.4 × 8,250,000)
             = 0 + 3,300,000
             = 3,300,000 ریال
```

**این یک خدمت اضافی است که فقط RVU حرفه‌ای دارد!**

---

**تهیه‌کننده:** AI Assistant  
**تاریخ:** ۲ اکتبر ۲۰۲۵  
**نسخه:** 1.0

