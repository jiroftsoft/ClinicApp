# 📋 **راهنمای کامل تعرفه‌ها و کدهای خدمات پزشکی**

## 🎯 **مقدمه**

این سند راهنمای کاملی برای درک ساختار تعرفه‌های پزشکی، گروه‌بندی کدها و محاسبات کای‌ها در سیستم کلینیک شفا است.

---

## 📊 **گروه‌بندی کدهای خدمات**

### **🔢 گروه‌های اصلی:**

#### **1️⃣ گروه‌های ۱ تا ۷ (کدهای 100xxx تا 700xxx)**
- **محدوده:** 100xxx, 200xxx, 300xxx, 400xxx, 500xxx, 600xxx, 700xxx
- **نوع خدمات:** اعمال و رویه‌های پزشکی
- **نمونه‌ها:**
  - پانسمان و شست‌وشوی زخم
  - کشیدن بخیه، بخیه ساده/لایه‌به‌لایه
  - دبریدمان و ترمیم زخم‌های کوچک
  - بیوپسی و اکسیزیون‌های پوستی/ناخن
  - درناژ آبسه‌های سطحی
  - تزریق داخل‌ضایعه
  - تزریقات وریدی/عضلانی
  - لوله‌گذاری معده و لاواژ
  - رویه‌های پاراکلینیک/مامایی سرپایی

#### **2️⃣ گروه ۸ (کدهای 800xxx)**
- **نوع خدمات:** خدمات تخصصی و پیچیده
- **ویژگی:** خدمات با پیچیدگی متوسط

#### **3️⃣ گروه ۹ (کدهای 97xxxx)**
- **محدوده:** 970000 تا 978xxx
- **نوع خدمات:** ویزیت‌ها و ارزیابی‌ها
- **نمونه‌ها:**
  - ویزیت پزشک عمومی (970000)
  - ویزیت پزشک متخصص (970015, 970016)
  - ویزیت فوق تخصص (970030, 970031)
  - ویزیت کودکان (978000, 978001)
  - ویزیت با سابقه (978005)

---

## 🏷️ **علامت‌گذاری خدمات (#)**

### **📌 تعریف علامت #:**
- **#:** خدمات هشتگ‌دار
- **+#:** خدمات با هشتگ مثبت
- **#*:** خدمات با هشتگ ستاره‌ای

### **🎯 ویژگی‌های خدمات هشتگ‌دار:**
1. **قابلیت ارائه در سرپایی و بستری**
2. **کای یکسان در هر دو بخش**
3. **ضرایب محاسباتی خاص**

---

## 💰 **محاسبات کای‌ها (مصوبه 1404)**

### **🔢 ضرایب فنی (Technical Factors):**

| **گروه** | **نوع** | **کای (ریال)** | **توضیح** |
|---|---|---|---|
| عمومی | بدون هشتگ | 4,350,000 | خدمات عادی |
| ۱-۷ | هشتگ‌دار | 2,750,000 | اعمال کوچک هشتگ‌دار |
| ۸-۹ | هشتگ‌دار | 2,600,000 | ویزیت‌ها و خدمات پیچیده |
| دندانپزشکی | بدون هشتگ | 1,900,000 | خدمات دندانپزشکی |
| مواد دندانپزشکی | بدون هشتگ | 1,000,000 | لوازم مصرفی |

### **🔢 ضرایب حرفه‌ای (Professional Factors):**

| **نوع** | **کای (ریال)** | **توضیح** |
|---|---|---|
| بدون هشتگ | 1,370,000 | خدمات عادی |
| هشتگ‌دار | 770,000 | خدمات هشتگ‌دار |
| دندانپزشکی | 850,000 | خدمات دندانپزشکی |

---

## 🧮 **فرمول محاسبه قیمت**

### **📐 فرمول پایه:**
```
قیمت نهایی = (جزء فنی × کای فنی) + (جزء حرفه‌ای × کای حرفه‌ای)
```

### **📊 مثال محاسبه کد 970000:**

#### **مشخصات خدمت:**
- **کد:** 970000 (ویزیت پزشک عمومی)
- **گروه:** ۹ (ویزیت‌ها)
- **هشتگ:** دارد (#)
- **جزء فنی:** 0.5
- **جزء حرفه‌ای:** 1.3

#### **محاسبه:**
- **کای فنی گروه ۸-۹:** 2,600,000 ریال
- **کای حرفه‌ای هشتگ‌دار:** 770,000 ریال
- **جزء فنی:** 0.5 × 2,600,000 = 1,300,000 ریال
- **جزء حرفه‌ای:** 1.3 × 770,000 = 1,001,000 ریال
- **قیمت نهایی:** 1,300,000 + 1,001,000 = **2,301,000 ریال**

---

## 📋 **جدول کامل کدهای ویزیت**

### **🏥 ویزیت‌های پزشک عمومی:**
| **کد** | **عنوان** | **جزء فنی** | **جزء حرفه‌ای** | **قیمت (ریال)** |
|---|---|---|---|---|
| 970000 | ویزیت پزشک عمومی | 0.5 | 1.3 | 2,301,000 |
| 970005 | ویزیت دندان‌پزشک عمومی | 0.5 | 1.3 | 2,301,000 |

### **👨‍⚕️ ویزیت‌های متخصص:**
| **کد** | **عنوان** | **جزء فنی** | **جزء حرفه‌ای** | **قیمت (ریال)** |
|---|---|---|---|---|
| 970015 | متخصص غیرتمام‌وقت | 0.7 | 1.8 | 3,206,000 |
| 970016 | متخصص تمام‌وقت | 0.7 | 1.8 | 3,206,000 |

### **👨‍⚕️ ویزیت‌های فوق تخصص:**
| **کد** | **عنوان** | **جزء فنی** | **جزء حرفه‌ای** | **قیمت (ریال)** |
|---|---|---|---|---|
| 970030 | فوق تخصص غیرتمام‌وقت | 0.8 | 2.3 | 4,071,000 |
| 970031 | فوق تخصص تمام‌وقت | 0.8 | 2.3 | 4,071,000 |

### **👶 ویزیت‌های کودکان:**
| **کد** | **عنوان** | **جزء فنی** | **جزء حرفه‌ای** | **قیمت (ریال)** |
|---|---|---|---|---|
| 978000 | کودکان زیر ۱۰ سال | 0.15 | 0.5 | 1,015,000 |
| 978001 | کودکان زیر ۷ سال | 0.15 | 0.5 | 1,015,000 |

---

## 🔧 **پیاده‌سازی در سیستم**

### **📁 ساختار فایل‌ها:**
```
Models/Enums/FactorScope.cs          # تعریف دامنه‌های کای
Models/Entities/Clinic/FactorSetting.cs  # مدل تنظیمات کای
Services/ServiceCalculationService.cs    # محاسبه قیمت خدمات
Services/DataSeeding/FactorSettingSeedService.cs  # Seed کای‌ها
```

### **🎯 کلیدهای یکتا:**
- **FinancialYear:** سال مالی (1404)
- **FactorType:** نوع کای (فنی/حرفه‌ای)
- **Scope:** دامنه کای
- **IsHashtagged:** وضعیت هشتگ
- **IsActive:** وضعیت فعال
- **IsDeleted:** وضعیت حذف

---

## 📚 **مراجع و منابع**

### **📖 منابع رسمی:**
- مصوبه تعرفه‌های پزشکی 1404
- راهنمای سرپایی وزارت بهداشت
- دستورالعمل‌های سازمان بیمه سلامت

### **🔗 لینک‌های مفید:**
- [سایت وزارت بهداشت](https://behdasht.gov.ir)
- [سازمان بیمه سلامت](https://ihio.gov.ir)
- [پورتال خدمات درمانی](https://snpm.ir)

---

## ✅ **نتیجه‌گیری**

سیستم محاسبات تعرفه‌ها در کلینیک شفا بر اساس:
1. **گروه‌بندی صحیح کدها** (۱-۷، ۸، ۹)
2. **علامت‌گذاری هشتگ** (#، +#، #*)
3. **ضرایب مصوب 1404**
4. **فرمول‌های استاندارد وزارت بهداشت**

طراحی و پیاده‌سازی شده است.

---

**📅 تاریخ ایجاد:** 1404/01/01  
**👨‍💻 تهیه‌کننده:** تیم توسعه کلینیک شفا  
**🔄 نسخه:** 1.0
