@using ClinicApp.ViewModels.Reception
@using ClinicApp.Constants
@model ReceptionAccordionViewModel

<!-- فرم پذیرش آکاردئون فوق حرفه‌ای - محیط درمانی -->
<div class="reception-accordion-form" id="receptionAccordionForm">
    
    <!-- Header فرم -->
    <div class="accordion-form-header">
        <div class="form-title-section">
            <h2 class="form-title">
                <i class="fas fa-clipboard-list me-3"></i>
                فرم پذیرش بیمار
            </h2>
            <p class="form-subtitle">سیستم یکپارچه پذیرش - محیط درمانی حرفه‌ای</p>
        </div>
        <div class="form-status-section">
            <div class="status-indicator" id="formStatusIndicator">
                <span class="status-icon">
                    <i class="fas fa-circle"></i>
                </span>
                <span class="status-text">آماده</span>
            </div>
            <div class="progress-indicator">
                <span class="progress-text">
                    <span id="completedSections">0</span> از <span id="totalSections">5</span> بخش تکمیل شده
                </span>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" data-width="0"></div>
                </div>
            </div>
        </div>
        <div class="form-actions">
            <button type="button" class="btn btn-primary" id="saveFormBtn">
                <i class="fas fa-save me-2"></i>
                ذخیره فرم
            </button>
            <button type="button" class="btn btn-secondary" id="resetFormBtn">
                <i class="fas fa-undo me-2"></i>
                بازنشانی
            </button>
        </div>
    </div>

    <!-- بخش‌های آکاردئون -->
    <div class="accordion-sections">
        
        <!-- بخش اطلاعات بیمار -->
        <div class="accordion-section" id="patientSection">
            <div class="section-header" data-section="patient">
                <div class="section-title">
                    <h5>
                        <i class="fas fa-user me-2"></i>
                        اطلاعات بیمار
                    </h5>
                    <p class="section-subtitle">جستجو و ثبت اطلاعات هویتی بیمار</p>
                </div>
                <div class="section-status">
                    <span class="status-icon">
                        <i class="fas fa-circle"></i>
                    </span>
                    <span class="status-text">در انتظار</span>
                </div>
                <div class="section-actions">
                    <button type="button" class="btn btn-outline-primary btn-sm" id="editPatientBtn">
                        <i class="fas fa-edit me-1"></i>
                        ویرایش
                    </button>
                </div>
            </div>
            <div class="section-content">
                @Html.Partial("Components/_PatientAccordionSection", Model.Patient)
            </div>
        </div>

        <!-- بخش بیمه -->
        <div class="accordion-section" id="insuranceSection">
            <div class="section-header" data-section="insurance">
                <div class="section-title">
                    <h5>
                        <i class="fas fa-shield-alt me-2"></i>
                        اطلاعات بیمه
                    </h5>
                    <p class="section-subtitle">بیمه اصلی و تکمیلی بیمار</p>
                </div>
                <div class="section-status">
                    <span class="status-icon">
                        <i class="fas fa-circle"></i>
                    </span>
                    <span class="status-text">در انتظار</span>
                </div>
                <div class="section-actions">
                    <button type="button" class="btn btn-outline-primary btn-sm" id="editInsuranceBtn">
                        <i class="fas fa-edit me-1"></i>
                        ویرایش
                    </button>
                </div>
            </div>
            <div class="section-content">
                @Html.Partial("Components/_InsuranceAccordionSection", Model.Insurance)
            </div>
        </div>

        <!-- بخش دپارتمان و پزشک -->
        <div class="accordion-section" id="departmentSection">
            <div class="section-header" data-section="department">
                <div class="section-title">
                    <h5>
                        <i class="fas fa-hospital me-2"></i>
                        دپارتمان و پزشک
                    </h5>
                    <p class="section-subtitle">انتخاب تخصص و پزشک معالج</p>
                </div>
                <div class="section-status">
                    <span class="status-icon">
                        <i class="fas fa-circle"></i>
                    </span>
                    <span class="status-text">در انتظار</span>
                </div>
                <div class="section-actions">
                    <button type="button" class="btn btn-outline-primary btn-sm" id="editDepartmentBtn">
                        <i class="fas fa-edit me-1"></i>
                        ویرایش
                    </button>
                </div>
            </div>
            <div class="section-content">
                @Html.Partial("Components/_DepartmentAccordionSection", Model.Department)
            </div>
        </div>

        <!-- بخش خدمات -->
        <div class="accordion-section" id="serviceSection">
            <div class="section-header" data-section="service">
                <div class="section-title">
                    <h5>
                        <i class="fas fa-stethoscope me-2"></i>
                        انتخاب خدمات
                    </h5>
                    <p class="section-subtitle">خدمات درمانی و محاسبه هزینه</p>
                </div>
                <div class="section-status">
                    <span class="status-icon">
                        <i class="fas fa-circle"></i>
                    </span>
                    <span class="status-text">در انتظار</span>
                </div>
                <div class="section-actions">
                    <button type="button" class="btn btn-outline-primary btn-sm" id="editServiceBtn">
                        <i class="fas fa-edit me-1"></i>
                        ویرایش
                    </button>
                </div>
            </div>
            <div class="section-content">
                @Html.Partial("Components/_ServiceAccordionSection", Model.Service)
            </div>
        </div>

        <!-- بخش پرداخت -->
        <div class="accordion-section" id="paymentSection">
            <div class="section-header" data-section="payment">
                <div class="section-title">
                    <h5>
                        <i class="fas fa-credit-card me-2"></i>
                        پرداخت
                    </h5>
                    <p class="section-subtitle">پرداخت آنلاین و نقدی</p>
                </div>
                <div class="section-status">
                    <span class="status-icon">
                        <i class="fas fa-circle"></i>
                    </span>
                    <span class="status-text">در انتظار</span>
                </div>
                <div class="section-actions">
                    <button type="button" class="btn btn-outline-primary btn-sm" id="editPaymentBtn">
                        <i class="fas fa-edit me-1"></i>
                        ویرایش
                    </button>
                </div>
            </div>
            <div class="section-content">
                @Html.Partial("Components/_PaymentAccordionSection", Model.Payment)
            </div>
        </div>

    </div>

    <!-- Footer فرم -->
    <div class="accordion-form-footer">
        <div class="form-summary">
            <div class="summary-item">
                <span class="summary-label">تعداد بخش‌های تکمیل شده:</span>
                <span class="summary-value" id="completedCount">0</span>
            </div>
            <div class="summary-item">
                <span class="summary-label">وضعیت فرم:</span>
                <span class="summary-value" id="formStatus">در انتظار</span>
            </div>
        </div>
        <div class="form-actions">
            <button type="button" class="btn btn-success" id="submitFormBtn">
                <i class="fas fa-check me-2"></i>
                ارسال فرم
            </button>
            <button type="button" class="btn btn-warning" id="saveDraftBtn">
                <i class="fas fa-save me-2"></i>
                ذخیره پیش‌نویس
            </button>
        </div>
    </div>

</div>

<!-- CSS moved to centralized file: Content/css/reception/reception-accordion.css -->

<!-- JavaScript moved to centralized module -->