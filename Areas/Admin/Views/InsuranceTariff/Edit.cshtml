@model ClinicApp.ViewModels.Insurance.InsuranceTariff.InsuranceTariffCreateEditViewModel
@{
    ViewBag.Title = "ÙˆÛŒØ±Ø§ÛŒØ´ ØªØ¹Ø±ÙÙ‡ Ø¨ÛŒÙ…Ù‡";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}

<div class="container-fluid">
    <!-- Header Section -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <h1 class="h3 mb-0">
                        <i class="fas fa-edit text-warning"></i>
                        ÙˆÛŒØ±Ø§ÛŒØ´ ØªØ¹Ø±ÙÙ‡ Ø¨ÛŒÙ…Ù‡
                    </h1>
                    <p class="text-muted mb-0">ÙˆÛŒØ±Ø§ÛŒØ´ ØªØ¹Ø±ÙÙ‡ Ø®Ø§Øµ Ø¨Ø±Ø§ÛŒ Ø®Ø¯Ù…Øª Ø¯Ø± Ø·Ø±Ø­ Ø¨ÛŒÙ…Ù‡</p>
                </div>
                <div>
                    <a href="@Url.Action("Details", new { id = Model.InsuranceTariffId })" class="btn btn-info">
                        <i class="fas fa-eye"></i>
                        Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¬Ø²Ø¦ÛŒØ§Øª
                    </a>
                    <a href="@Url.Action("Index")" class="btn btn-secondary">
                        <i class="fas fa-arrow-right"></i>
                        Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù„ÛŒØ³Øª
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Form Section -->
    <div class="row">
        <div class="col-lg-8">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fas fa-edit"></i>
                        Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªØ¹Ø±ÙÙ‡ Ø¨ÛŒÙ…Ù‡
                    </h5>
                </div>
                <div class="card-body">
                    @using (Html.BeginForm("Edit", "InsuranceTariff", FormMethod.Post, new { @class = "needs-validation", novalidate = "novalidate" }))
                    {
                        @Html.AntiForgeryToken()
                        @Html.HiddenFor(model => model.InsuranceTariffId)
                        @Html.ValidationSummary(true, "", new { @class = "alert alert-danger" })
                        
                        <!-- Hidden fields for "All" selections -->
                        <input type="hidden" id="IsAllServiceCategories" name="IsAllServiceCategories" value="false" />
                        <input type="hidden" id="IsAllServices" name="IsAllServices" value="false" />

                        <div class="row">
                            <!-- Department Selection -->
                            <div class="col-md-4">
                                <div class="form-group">
                                    @Html.LabelFor(model => model.DepartmentId, new { @class = "form-label required" })
                                    <select id="DepartmentId" name="DepartmentId" class="form-control" required>
                                        <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ø¯Ù¾Ø§Ø±ØªÙ…Ø§Ù†</option>
                                    </select>
                                    @Html.ValidationMessageFor(model => model.DepartmentId, "", new { @class = "text-danger small mt-1" })
                                    <div class="form-note">Ø¯Ù¾Ø§Ø±ØªÙ…Ø§Ù† Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</div>
                                </div>
                            </div>

                            <!-- Service Category Selection -->
                            <div class="col-md-4">
                                <div class="form-group">
                                    @Html.LabelFor(model => model.ServiceCategoryId, new { @class = "form-label" })
                                    <select id="ServiceCategoryId" name="ServiceCategoryId" class="form-control">
                                        <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ø³Ø±ÙØµÙ„ Ø®Ø¯Ù…Øª</option>
                                    </select>
                                    @Html.ValidationMessageFor(model => model.ServiceCategoryId, "", new { @class = "text-danger small mt-1" })
                                    <div class="form-note">
                                        <i class="fas fa-info-circle text-info"></i>
                                        Ø³Ø±ÙØµÙ„ Ø®Ø¯Ù…Øª Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ ÛŒØ§ "Ù‡Ù…Ù‡ Ø³Ø±ÙØµÙ„â€ŒÙ‡Ø§" Ø±Ø§ Ø¨Ø±Ø§ÛŒ ØªØ¹Ø±ÛŒÙ ØªØ¹Ø±ÙÙ‡ Ø¹Ù…ÙˆÙ…ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯
                                    </div>
                                </div>
                            </div>

                            <!-- Service Selection -->
                            <div class="col-md-4">
                                <div class="form-group">
                                    @Html.LabelFor(model => model.ServiceId, new { @class = "form-label required" })
                                    @Html.DropDownListFor(model => model.ServiceId, Model.ServiceSelectList, 
                                        "Ø§Ù†ØªØ®Ø§Ø¨ Ø®Ø¯Ù…Øª", new { @class = "form-control" })
                                    @Html.ValidationMessageFor(model => model.ServiceId, "", new { @class = "text-danger small mt-1" })
                                    <div class="form-note">Ø®Ø¯Ù…Øª Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ ÛŒØ§ "Ù‡Ù…Ù‡ Ø®Ø¯Ù…Ø§Øª" Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <!-- Insurance Provider Selection -->
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label required">Ø§Ø±Ø§Ø¦Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ù‡ Ø¨ÛŒÙ…Ù‡</label>
                                    @Html.DropDownListFor(model => model.InsuranceProviderId, Model.InsuranceProviderSelectList, 
                                        "Ø§Ù†ØªØ®Ø§Ø¨ Ø§Ø±Ø§Ø¦Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ù‡ Ø¨ÛŒÙ…Ù‡", new { @class = "form-control", required = "required" })
                                    <div class="form-note">Ø§Ø±Ø§Ø¦Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ù‡ Ø¨ÛŒÙ…Ù‡ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</div>
                                </div>
                            </div>

                            <!-- Insurance Plan Selection -->
                            <div class="col-md-6">
                                <div class="form-group">
                                    @Html.LabelFor(model => model.InsurancePlanId, new { @class = "form-label required" })
                                    @Html.DropDownListFor(model => model.InsurancePlanId, Model.InsurancePlanSelectList, 
                                        "Ø§Ù†ØªØ®Ø§Ø¨ Ø·Ø±Ø­ Ø¨ÛŒÙ…Ù‡", new { @class = "form-control", required = "required" })
                                    @Html.ValidationMessageFor(model => model.InsurancePlanId, "", new { @class = "text-danger small mt-1" })
                                    <div class="form-note">Ø·Ø±Ø­ Ø¨ÛŒÙ…Ù‡ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <!-- Tariff Price -->
                            <div class="col-md-4">
                                <div class="form-group">
                                    @Html.LabelFor(model => model.TariffPrice, new { @class = "form-label" })
                                    @Html.TextBoxFor(model => model.TariffPrice, new { 
                                        @class = "form-control", 
                                        type = "number", 
                                        min = "0", 
                                        step = "1000", 
                                        placeholder = "Ù‚ÛŒÙ…Øª ØªØ¹Ø±ÙÙ‡ (ØªÙˆÙ…Ø§Ù†)" 
                                    })
                                    @Html.ValidationMessageFor(model => model.TariffPrice, "", new { @class = "text-danger small mt-1" })
                                    <div class="form-note">Ù‚ÛŒÙ…Øª Ø®Ø§Øµ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† ØªØ¹Ø±ÙÙ‡ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)</div>
                                </div>
                            </div>

                            <!-- Patient Share -->
                            <div class="col-md-4">
                                <div class="form-group">
                                    @Html.LabelFor(model => model.PatientShare, new { @class = "form-label" })
                                    @Html.TextBoxFor(model => model.PatientShare, new { 
                                        @class = "form-control", 
                                        type = "number", 
                                        min = "0", 
                                        max = "100", 
                                        step = "0.1", 
                                        placeholder = "Ø¯Ø±ØµØ¯ Ø³Ù‡Ù… Ø¨ÛŒÙ…Ø§Ø±" 
                                    })
                                    @Html.ValidationMessageFor(model => model.PatientShare, "", new { @class = "text-danger small mt-1" })
                                    <div class="form-note">Ø¯Ø±ØµØ¯ Ø³Ù‡Ù… Ø¨ÛŒÙ…Ø§Ø± (0-100)</div>
                                </div>
                            </div>

                            <!-- Insurer Share -->
                            <div class="col-md-4">
                                <div class="form-group">
                                    @Html.LabelFor(model => model.InsurerShare, new { @class = "form-label" })
                                    @Html.TextBoxFor(model => model.InsurerShare, new { 
                                        @class = "form-control", 
                                        type = "number", 
                                        min = "0", 
                                        max = "100", 
                                        step = "0.1", 
                                        placeholder = "Ø¯Ø±ØµØ¯ Ø³Ù‡Ù… Ø¨ÛŒÙ…Ù‡" 
                                    })
                                    @Html.ValidationMessageFor(model => model.InsurerShare, "", new { @class = "text-danger small mt-1" })
                                    <div class="form-note">Ø¯Ø±ØµØ¯ Ø³Ù‡Ù… Ø¨ÛŒÙ…Ù‡ (0-100)</div>
                                </div>
                            </div>
                        </div>

                        <!-- IsActive -->
                        <div class="row">
                            <div class="col-12">
                                <div class="form-group">
                                    <div class="form-check">
                                        @Html.CheckBoxFor(model => model.IsActive, new { @class = "form-check-input" })
                                        @Html.LabelFor(model => model.IsActive, new { @class = "form-check-label" })
                                    </div>
                                    @Html.ValidationMessageFor(model => model.IsActive, "", new { @class = "text-danger small mt-1" })
                                    <div class="form-note">ØªØ¹Ø±ÙÙ‡ ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ø¯ ÛŒØ§ ØºÛŒØ±ÙØ¹Ø§Ù„</div>
                                </div>
                            </div>
                        </div>

                        <!-- Validation Summary -->
                        <div class="row">
                            <div class="col-12">
                                <div class="alert alert-info">
                                    <h6><i class="fas fa-info-circle"></i> Ù†Ú©Ø§Øª Ù…Ù‡Ù…:</h6>
                                    <ul class="mb-0">
                                        <li>Ø§Ú¯Ø± Ù‚ÛŒÙ…Øª ØªØ¹Ø±ÙÙ‡ ÙˆØ§Ø±Ø¯ Ù†Ø´ÙˆØ¯ØŒ Ø§Ø² Ù‚ÛŒÙ…Øª Ù¾Ø§ÛŒÙ‡ Ø®Ø¯Ù…Øª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯</li>
                                        <li>Ø§Ú¯Ø± Ø³Ù‡Ù… Ø¨ÛŒÙ…Ø§Ø± Ùˆ Ø¨ÛŒÙ…Ù‡ ÙˆØ§Ø±Ø¯ Ù†Ø´ÙˆØ¯ØŒ Ø§Ø² ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø·Ø±Ø­ Ø¨ÛŒÙ…Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯</li>
                                        <li>Ù…Ø¬Ù…ÙˆØ¹ Ø³Ù‡Ù… Ø¨ÛŒÙ…Ø§Ø± Ùˆ Ø¨ÛŒÙ…Ù‡ Ù†Ø¨Ø§ÛŒØ¯ Ø¨ÛŒØ´ Ø§Ø² 100 Ø¯Ø±ØµØ¯ Ø¨Ø§Ø´Ø¯</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Submit Buttons -->
                        <div class="row">
                            <div class="col-12">
                                <div class="form-group">
                                    <button type="submit" class="btn btn-warning">
                                        <i class="fas fa-save"></i>
                                        Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª
                                    </button>
                                    <a href="@Url.Action("Details", new { id = Model.InsuranceTariffId })" class="btn btn-info">
                                        <i class="fas fa-eye"></i>
                                        Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¬Ø²Ø¦ÛŒØ§Øª
                                    </a>
                                    <a href="@Url.Action("Index")" class="btn btn-secondary">
                                        <i class="fas fa-times"></i>
                                        Ø§Ù†ØµØ±Ø§Ù
                                    </a>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>

        <!-- Info Panel -->
        <div class="col-lg-4">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fas fa-info-circle"></i>
                        Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ ÙˆÛŒØ±Ø§ÛŒØ´ ØªØ¹Ø±ÙÙ‡ Ø¨ÛŒÙ…Ù‡
                    </h5>
                </div>
                <div class="card-body">
                    <h6>ÙˆÛŒØ±Ø§ÛŒØ´ ØªØ¹Ø±ÙÙ‡ Ø¨ÛŒÙ…Ù‡</h6>
                    <p class="text-muted small">
                        Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªØ¹Ø±ÙÙ‡ Ø¨ÛŒÙ…Ù‡ Ø±Ø§ ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ù†ÛŒØ¯. ØªØºÛŒÛŒØ±Ø§Øª Ø¨Ù„Ø§ÙØ§ØµÙ„Ù‡ Ø§Ø¹Ù…Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                    </p>

                    <h6>Ù†Ú©Ø§Øª Ù…Ù‡Ù…</h6>
                    <ul class="text-muted small">
                        <li>ØªØºÛŒÛŒØ± Ù‚ÛŒÙ…Øª ØªØ¹Ø±ÙÙ‡ Ø¨Ø± Ø±ÙˆÛŒ Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ø¢ÛŒÙ†Ø¯Ù‡ ØªØ£Ø«ÛŒØ± Ù…ÛŒâ€ŒÚ¯Ø°Ø§Ø±Ø¯</li>
                        <li>ØªØºÛŒÛŒØ± Ø³Ù‡Ù… Ø¨ÛŒÙ…Ø§Ø± Ùˆ Ø¨ÛŒÙ…Ù‡ Ø¨Ø± Ø±ÙˆÛŒ Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ø¢ÛŒÙ†Ø¯Ù‡ ØªØ£Ø«ÛŒØ± Ù…ÛŒâ€ŒÚ¯Ø°Ø§Ø±Ø¯</li>
                        <li>ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† ØªØ¹Ø±ÙÙ‡ Ø¨Ø§Ø¹Ø« Ø¹Ø¯Ù… Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø¢Ù† Ù…ÛŒâ€ŒØ´ÙˆØ¯</li>
                    </ul>

                    <h6>Ù…Ø«Ø§Ù„</h6>
                    <div class="bg-light p-3 rounded">
                        <small>
                            <strong>Ø®Ø¯Ù…Øª:</strong> Ø¢Ø²Ù…Ø§ÛŒØ´ Ø®ÙˆÙ†<br>
                            <strong>Ù‚ÛŒÙ…Øª Ù¾Ø§ÛŒÙ‡:</strong> 50,000 ØªÙˆÙ…Ø§Ù†<br>
                            <strong>ØªØ¹Ø±ÙÙ‡ Ø¨ÛŒÙ…Ù‡:</strong> 45,000 ØªÙˆÙ…Ø§Ù†<br>
                            <strong>Ø³Ù‡Ù… Ø¨ÛŒÙ…Ù‡:</strong> 80%<br>
                            <strong>Ø³Ù‡Ù… Ø¨ÛŒÙ…Ø§Ø±:</strong> 20%
                        </small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function() {
            // Form validation - Ø§Ø¬Ø§Ø²Ù‡ Ø§Ø±Ø³Ø§Ù„ ÙØ±Ù… Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø¨Ø±Ø§ÛŒ validation
            $('.needs-validation').on('submit', function(e) {
                console.log('âœ… ÙØ±Ù… Edit Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø±Ø³Ø§Ù„ Ø§Ø³Øª');
                $(this).addClass('was-validated');
            });

            // Ù†Ù…Ø§ÛŒØ´ loading indicator
            showLoadingIndicator();
            
            // Cascade Dropdowns
            loadDepartments();
            
            // Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø§Ø² Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ dropdown Ù‡Ø§ Ù‚Ø¨Ù„ Ø§Ø² Ø§Ø±Ø³Ø§Ù„ ÙØ±Ù…
            var dropdownsLoaded = false;
            setTimeout(function() {
                dropdownsLoaded = true;
                console.log('âœ… Dropdown Ù‡Ø§ Ø¢Ù…Ø§Ø¯Ù‡ Ù‡Ø³ØªÙ†Ø¯');
            }, 2000); // 2 Ø«Ø§Ù†ÛŒÙ‡ timeout
            
            $('#DepartmentId').on('change', function() {
                var departmentId = $(this).val();
                if (departmentId) {
                    loadServiceCategories(departmentId);
                } else {
                    $('#ServiceCategoryId').empty().append('<option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ø³Ø±ÙØµÙ„ Ø®Ø¯Ù…Øª</option>');
                    $('#ServiceId').empty().append('<option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ø®Ø¯Ù…Øª</option>');
                }
            });
            
            $('#ServiceCategoryId').on('change', function() {
                var serviceCategoryId = $(this).val();
                if (serviceCategoryId) {
                    loadServices(serviceCategoryId);
                } else {
                    $('#ServiceId').empty().append('<option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ø®Ø¯Ù…Øª</option>');
                }
            });
            
            $('#InsuranceProviderId').on('change', function() {
                var providerId = $(this).val();
                if (providerId) {
                    loadInsurancePlans(providerId);
                } else {
                    $('#InsurancePlanId').empty().append('<option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ø·Ø±Ø­ Ø¨ÛŒÙ…Ù‡</option>');
                }
            });

            // Check for existing tariff (excluding current one)
            $('#ServiceId, #InsurancePlanId').on('change', function() {
                var serviceId = $('#ServiceId').val();
                var planId = $('#InsurancePlanId').val();
                var currentId = $('#InsuranceTariffId').val();
                
                if (serviceId && planId) {
                    checkExistingTariff(serviceId, planId, currentId);
                }
            });

            function checkExistingTariff(serviceId, planId, excludeId) {
                $.ajax({
                    url: '@Url.Action("CheckTariffExists")',
                    type: 'POST',
                    data: {
                        serviceId: serviceId,
                        planId: planId,
                        excludeId: excludeId,
                        __RequestVerificationToken: $('input[name="__RequestVerificationToken"]').val()
                    },
                    success: function(response) {
                        if (response.exists) {
                            showWarning('ØªØ¹Ø±ÙÙ‡ Ø¨ÛŒÙ…Ù‡ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ø®Ø¯Ù…Øª Ùˆ Ø·Ø±Ø­ Ù‚Ø¨Ù„Ø§Ù‹ ØªØ¹Ø±ÛŒÙ Ø´Ø¯Ù‡ Ø§Ø³Øª.');
                        }
                    }
                });
            }

            function showWarning(message) {
                var alert = $('<div class="alert alert-warning alert-dismissible fade show" role="alert">' +
                    '<i class="fas fa-exclamation-triangle"></i> ' + message +
                    '<button type="button" class="close" data-dismiss="alert">' +
                    '<span>&times;</span></button></div>');
                
                $('.card-body').prepend(alert);
                
                setTimeout(function() {
                    alert.fadeOut();
                }, 5000);
            }
            
            // Helper Functions
            function showLoadingIndicator() {
                // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† loading indicator Ø¨Ù‡ dropdown Ù‡Ø§
                $('#DepartmentId').html('<option value="">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø¯Ù¾Ø§Ø±ØªÙ…Ø§Ù†â€ŒÙ‡Ø§...</option>');
                $('#ServiceCategoryId').html('<option value="">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø³Ø±ÙØµÙ„â€ŒÙ‡Ø§...</option>');
                $('#ServiceId').html('<option value="">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø®Ø¯Ù…Ø§Øª...</option>');
                $('#InsuranceProviderId').html('<option value="">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø§Ø±Ø§Ø¦Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ú¯Ø§Ù†...</option>');
                $('#InsurancePlanId').html('<option value="">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø·Ø±Ø­â€ŒÙ‡Ø§...</option>');
                
                // ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† dropdown Ù‡Ø§
                $('#DepartmentId, #ServiceCategoryId, #ServiceId, #InsuranceProviderId, #InsurancePlanId').prop('disabled', true);
            }
            
            function hideLoadingIndicator() {
                // ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† dropdown Ù‡Ø§
                $('#DepartmentId, #ServiceCategoryId, #ServiceId, #InsuranceProviderId, #InsurancePlanId').prop('disabled', false);
            }
            
            // Cascade Dropdown Functions
            function loadDepartments() {
                console.log('ğŸ”„ Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø¯Ù¾Ø§Ø±ØªÙ…Ø§Ù†â€ŒÙ‡Ø§...');
                $.ajax({
                    url: '@Url.Action("GetDepartments")',
                    type: 'GET',
                    cache: false,
                    success: function(response) {
                        console.log('ğŸ“Š Ù¾Ø§Ø³Ø® Ø¯Ù¾Ø§Ø±ØªÙ…Ø§Ù†â€ŒÙ‡Ø§:', response);
                        
                        // Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ù‚ÛŒÙ‚ response - Ù…Ù…Ú©Ù† Ø§Ø³Øª response string Ø¨Ø§Ø´Ø¯
                        var data = response;
                        if (typeof response === 'string') {
                            try {
                                data = JSON.parse(response);
                            } catch (e) {
                                console.error('âŒ Ø®Ø·Ø§ Ø¯Ø± parse Ú©Ø±Ø¯Ù† JSON:', e);
                                showWarning('Ø®Ø·Ø§ Ø¯Ø± Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ù¾Ø§Ø±ØªÙ…Ø§Ù†â€ŒÙ‡Ø§');
                                return;
                            }
                        }
                        
                        console.log('ğŸ” parsed data:', data);
                        
                        if (data && data.success === true && data.data) {
                            var options = '<option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ø¯Ù¾Ø§Ø±ØªÙ…Ø§Ù†</option>';
                            $.each(data.data, function(index, item) {
                                var selected = item.id == @Model.DepartmentId ? 'selected' : '';
                                options += '<option value="' + item.id + '" ' + selected + '>' + item.name + '</option>';
                            });
                            
                            // Ø­Ø°Ù Select2 Ù‚Ø¨Ù„ÛŒ Ø§Ú¯Ø± ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯
                            if ($('#DepartmentId').hasClass('select2-hidden-accessible')) {
                                $('#DepartmentId').select2('destroy');
                            }
                            
                            $('#DepartmentId').html(options);
                            
                            // ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Select2
                            $('#DepartmentId').select2({
                                placeholder: 'Ø§Ù†ØªØ®Ø§Ø¨ Ø¯Ù¾Ø§Ø±ØªÙ…Ø§Ù†',
                                allowClear: true,
                                dir: 'rtl',
                                width: '100%'
                            });
                            
                            console.log('âœ… Ø¯Ù¾Ø§Ø±ØªÙ…Ø§Ù†â€ŒÙ‡Ø§ Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø´Ø¯Ù†Ø¯:', data.data.length, 'Ù…ÙˆØ±Ø¯');
                            hideLoadingIndicator();
                            
                            // Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø³Ø±ÙØµÙ„â€ŒÙ‡Ø§ÛŒ Ø®Ø¯Ù…Ø§ØªÛŒ Ø¨Ø±Ø§ÛŒ Ø¯Ù¾Ø§Ø±ØªÙ…Ø§Ù† Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡
                            if (@Model.DepartmentId > 0) {
                                loadServiceCategories(@Model.DepartmentId);
                            }
                        } else {
                            console.error('âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø¯Ù¾Ø§Ø±ØªÙ…Ø§Ù†â€ŒÙ‡Ø§ - data:', data);
                            showWarning('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø¯Ù¾Ø§Ø±ØªÙ…Ø§Ù†â€ŒÙ‡Ø§');
                            hideLoadingIndicator();
                        }
                    },
                    error: function(xhr, status, error) {
                        console.error('âŒ Ø®Ø·Ø§ÛŒ AJAX Ø¯Ø± Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø¯Ù¾Ø§Ø±ØªÙ…Ø§Ù†â€ŒÙ‡Ø§:', error);
                        showWarning('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø¯Ù¾Ø§Ø±ØªÙ…Ø§Ù†â€ŒÙ‡Ø§');
                        hideLoadingIndicator();
                    }
                });
            }
            
            function loadServiceCategories(departmentId) {
                console.log('ğŸ”„ Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø³Ø±ÙØµÙ„â€ŒÙ‡Ø§ÛŒ Ø®Ø¯Ù…Ø§ØªÛŒ - DepartmentId:', departmentId);
                $.ajax({
                    url: '@Url.Action("GetServiceCategories")',
                    type: 'GET',
                    data: { departmentId: departmentId },
                    cache: false,
                    success: function(response) {
                        console.log('ğŸ“Š Ù¾Ø§Ø³Ø® Ø³Ø±ÙØµÙ„â€ŒÙ‡Ø§ÛŒ Ø®Ø¯Ù…Ø§ØªÛŒ:', response);
                        
                        // Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ù‚ÛŒÙ‚ response - Ù…Ù…Ú©Ù† Ø§Ø³Øª response string Ø¨Ø§Ø´Ø¯
                        var data = response;
                        if (typeof response === 'string') {
                            try {
                                data = JSON.parse(response);
                            } catch (e) {
                                console.error('âŒ Ø®Ø·Ø§ Ø¯Ø± parse Ú©Ø±Ø¯Ù† JSON:', e);
                                showWarning('Ø®Ø·Ø§ Ø¯Ø± Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø³Ø±ÙØµÙ„â€ŒÙ‡Ø§ÛŒ Ø®Ø¯Ù…Ø§ØªÛŒ');
                                return;
                            }
                        }
                        
                        console.log('ğŸ” parsed data:', data);
                        
                        if (data && data.success === true && data.data) {
                            var options = '<option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ø³Ø±ÙØµÙ„ Ø®Ø¯Ù…Øª</option>';
                            options += '<option value="all" class="text-primary font-weight-bold">ğŸ“‹ Ù‡Ù…Ù‡ Ø³Ø±ÙØµÙ„â€ŒÙ‡Ø§</option>';
                            options += '<option value="" disabled>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</option>';
                            $.each(data.data, function(index, item) {
                                var selected = item.id == @Model.ServiceCategoryId ? 'selected' : '';
                                options += '<option value="' + item.id + '" ' + selected + '>' + item.name + '</option>';
                            });
                            
                            // Ø­Ø°Ù Select2 Ù‚Ø¨Ù„ÛŒ Ø§Ú¯Ø± ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯
                            if ($('#ServiceCategoryId').hasClass('select2-hidden-accessible')) {
                                $('#ServiceCategoryId').select2('destroy');
                            }
                            
                            $('#ServiceCategoryId').html(options);
                            
                            // ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Select2
                            $('#ServiceCategoryId').select2({
                                placeholder: 'Ø§Ù†ØªØ®Ø§Ø¨ Ø³Ø±ÙØµÙ„ Ø®Ø¯Ù…Øª',
                                allowClear: true,
                                dir: 'rtl',
                                width: '100%'
                            });
                            
                            $('#ServiceId').empty().append('<option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ø®Ø¯Ù…Øª</option>');
                            
                            console.log('âœ… Ø³Ø±ÙØµÙ„â€ŒÙ‡Ø§ÛŒ Ø®Ø¯Ù…Ø§ØªÛŒ Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø´Ø¯Ù†Ø¯:', data.data.length, 'Ù…ÙˆØ±Ø¯');
                            
                            // Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø®Ø¯Ù…Ø§Øª Ø¨Ø±Ø§ÛŒ Ø³Ø±ÙØµÙ„ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡
                            if (@Model.ServiceCategoryId > 0) {
                                loadServices(@Model.ServiceCategoryId);
                            }
                        } else {
                            console.error('âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø³Ø±ÙØµÙ„â€ŒÙ‡Ø§ÛŒ Ø®Ø¯Ù…Ø§ØªÛŒ - data:', data);
                            showWarning('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø³Ø±ÙØµÙ„â€ŒÙ‡Ø§ÛŒ Ø®Ø¯Ù…Ø§ØªÛŒ');
                        }
                    },
                    error: function(xhr, status, error) {
                        console.error('âŒ Ø®Ø·Ø§ÛŒ AJAX Ø¯Ø± Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø³Ø±ÙØµÙ„â€ŒÙ‡Ø§ÛŒ Ø®Ø¯Ù…Ø§ØªÛŒ:', error);
                        showWarning('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø³Ø±ÙØµÙ„â€ŒÙ‡Ø§ÛŒ Ø®Ø¯Ù…Ø§ØªÛŒ');
                    }
                });
            }
            
            function loadServices(serviceCategoryId) {
                console.log('ğŸ”„ Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø®Ø¯Ù…Ø§Øª - ServiceCategoryId:', serviceCategoryId);
                $.ajax({
                    url: '@Url.Action("GetServices")',
                    type: 'GET',
                    data: { serviceCategoryId: serviceCategoryId },
                    cache: false,
                    success: function(response) {
                        console.log('ğŸ“Š Ù¾Ø§Ø³Ø® Ø®Ø¯Ù…Ø§Øª:', response);
                        
                        // Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ù‚ÛŒÙ‚ response - Ù…Ù…Ú©Ù† Ø§Ø³Øª response string Ø¨Ø§Ø´Ø¯
                        var data = response;
                        if (typeof response === 'string') {
                            try {
                                data = JSON.parse(response);
                            } catch (e) {
                                console.error('âŒ Ø®Ø·Ø§ Ø¯Ø± parse Ú©Ø±Ø¯Ù† JSON:', e);
                                showWarning('Ø®Ø·Ø§ Ø¯Ø± Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø®Ø¯Ù…Ø§Øª');
                                return;
                            }
                        }
                        
                        console.log('ğŸ” parsed data:', data);
                        
                        if (data && data.success === true && data.data) {
                            var options = '<option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ø®Ø¯Ù…Øª</option>';
                            options += '<option value="all" class="text-success font-weight-bold">ğŸ”§ Ù‡Ù…Ù‡ Ø®Ø¯Ù…Ø§Øª</option>';
                            options += '<option value="" disabled>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</option>';
                            $.each(data.data, function(index, item) {
                                var selected = item.id == @Model.ServiceId ? 'selected' : '';
                                options += '<option value="' + item.id + '" ' + selected + '>' + item.name + '</option>';
                            });
                            
                            // Ø­Ø°Ù Select2 Ù‚Ø¨Ù„ÛŒ Ø§Ú¯Ø± ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯
                            if ($('#ServiceId').hasClass('select2-hidden-accessible')) {
                                $('#ServiceId').select2('destroy');
                            }
                            
                            $('#ServiceId').html(options);
                            
                            // ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Select2
                            $('#ServiceId').select2({
                                placeholder: 'Ø§Ù†ØªØ®Ø§Ø¨ Ø®Ø¯Ù…Øª',
                                allowClear: true,
                                dir: 'rtl',
                                width: '100%'
                            });
                            
                            console.log('âœ… Ø®Ø¯Ù…Ø§Øª Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø´Ø¯Ù†Ø¯:', data.data.length, 'Ù…ÙˆØ±Ø¯');
                        } else {
                            console.error('âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø®Ø¯Ù…Ø§Øª - data:', data);
                            showWarning('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø®Ø¯Ù…Ø§Øª');
                        }
                    },
                    error: function(xhr, status, error) {
                        console.error('âŒ Ø®Ø·Ø§ÛŒ AJAX Ø¯Ø± Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø®Ø¯Ù…Ø§Øª:', error);
                        showWarning('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø®Ø¯Ù…Ø§Øª');
                    }
                });
            }
            
            function loadInsurancePlans(providerId) {
                console.log('ğŸ”„ Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø·Ø±Ø­â€ŒÙ‡Ø§ÛŒ Ø¨ÛŒÙ…Ù‡ - ProviderId:', providerId);
                $.ajax({
                    url: '@Url.Action("GetInsurancePlans")',
                    type: 'GET',
                    data: { providerId: providerId },
                    cache: false,
                    success: function(response) {
                        console.log('ğŸ“Š Ù¾Ø§Ø³Ø® Ø·Ø±Ø­â€ŒÙ‡Ø§ÛŒ Ø¨ÛŒÙ…Ù‡:', response);
                        
                        // Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ù‚ÛŒÙ‚ response - Ù…Ù…Ú©Ù† Ø§Ø³Øª response string Ø¨Ø§Ø´Ø¯
                        var data = response;
                        if (typeof response === 'string') {
                            try {
                                data = JSON.parse(response);
                            } catch (e) {
                                console.error('âŒ Ø®Ø·Ø§ Ø¯Ø± parse Ú©Ø±Ø¯Ù† JSON:', e);
                                showWarning('Ø®Ø·Ø§ Ø¯Ø± Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø·Ø±Ø­â€ŒÙ‡Ø§ÛŒ Ø¨ÛŒÙ…Ù‡');
                                return;
                            }
                        }
                        
                        console.log('ğŸ” parsed data:', data);
                        
                        if (data && data.success === true && data.data) {
                            var options = '<option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ø·Ø±Ø­ Ø¨ÛŒÙ…Ù‡</option>';
                            $.each(data.data, function(index, item) {
                                var selected = item.id == @Model.InsurancePlanId ? 'selected' : '';
                                options += '<option value="' + item.id + '" ' + selected + '>' + item.name + '</option>';
                            });
                            
                            // Ø­Ø°Ù Select2 Ù‚Ø¨Ù„ÛŒ Ø§Ú¯Ø± ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯
                            if ($('#InsurancePlanId').hasClass('select2-hidden-accessible')) {
                                $('#InsurancePlanId').select2('destroy');
                            }
                            
                            $('#InsurancePlanId').html(options);
                            
                            // ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Select2
                            $('#InsurancePlanId').select2({
                                placeholder: 'Ø§Ù†ØªØ®Ø§Ø¨ Ø·Ø±Ø­ Ø¨ÛŒÙ…Ù‡',
                                allowClear: true,
                                dir: 'rtl',
                                width: '100%'
                            });
                            
                            console.log('âœ… Ø·Ø±Ø­â€ŒÙ‡Ø§ÛŒ Ø¨ÛŒÙ…Ù‡ Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø´Ø¯Ù†Ø¯:', data.data.length, 'Ù…ÙˆØ±Ø¯');
                        } else {
                            console.error('âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø·Ø±Ø­â€ŒÙ‡Ø§ÛŒ Ø¨ÛŒÙ…Ù‡ - data:', data);
                            showWarning('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø·Ø±Ø­â€ŒÙ‡Ø§ÛŒ Ø¨ÛŒÙ…Ù‡');
                        }
                    },
                    error: function(xhr, status, error) {
                        console.error('âŒ Ø®Ø·Ø§ÛŒ AJAX Ø¯Ø± Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø·Ø±Ø­â€ŒÙ‡Ø§ÛŒ Ø¨ÛŒÙ…Ù‡:', error);
                        showWarning('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø·Ø±Ø­â€ŒÙ‡Ø§ÛŒ Ø¨ÛŒÙ…Ù‡');
                    }
                });
            }
            
            // Form submission handling
            $('form').on('submit', function(e) {
                // Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ø¢ÛŒØ§ dropdown Ù‡Ø§ Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯
                if (!dropdownsLoaded) {
                    e.preventDefault();
                    showWarning('Ù„Ø·ÙØ§Ù‹ ØµØ¨Ø± Ú©Ù†ÛŒØ¯ ØªØ§ ÙÙ‡Ø±Ø³Øªâ€ŒÙ‡Ø§ Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø´ÙˆÙ†Ø¯');
                    return false;
                }
                
                var departmentId = $('#DepartmentId').val();
                var serviceCategoryId = $('#ServiceCategoryId').val();
                var serviceId = $('#ServiceId').val();
                var insuranceProviderId = $('#InsuranceProviderId').val();
                var insurancePlanId = $('#InsurancePlanId').val();
                
                // Debug: Ù†Ù…Ø§ÛŒØ´ Ù…Ù‚Ø§Ø¯ÛŒØ± Ø§ÙˆÙ„ÛŒÙ‡
                console.log('ğŸ” Ù…Ù‚Ø§Ø¯ÛŒØ± Ø§ÙˆÙ„ÛŒÙ‡ Ù‚Ø¨Ù„ Ø§Ø² Ù¾Ø±Ø¯Ø§Ø²Ø´:');
                console.log('DepartmentId:', departmentId);
                console.log('ServiceCategoryId:', serviceCategoryId);
                console.log('ServiceId:', serviceId);
                console.log('InsuranceProviderId:', insuranceProviderId);
                console.log('InsurancePlanId:', insurancePlanId);
                
                // Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ø¢ÛŒØ§ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¶Ø±ÙˆØ±ÛŒ Ù¾Ø± Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯
                if (!departmentId || departmentId === '' || departmentId === 'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø¯Ù¾Ø§Ø±ØªÙ…Ø§Ù†â€ŒÙ‡Ø§...') {
                    e.preventDefault();
                    showWarning('Ù„Ø·ÙØ§Ù‹ Ø¯Ù¾Ø§Ø±ØªÙ…Ø§Ù† Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
                    return false;
                }
                
                if (!insuranceProviderId || insuranceProviderId === '' || insuranceProviderId === 'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø§Ø±Ø§Ø¦Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ú¯Ø§Ù†...') {
                    e.preventDefault();
                    showWarning('Ù„Ø·ÙØ§Ù‹ Ø§Ø±Ø§Ø¦Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ù‡ Ø¨ÛŒÙ…Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
                    return false;
                }
                
                if (!insurancePlanId || insurancePlanId === '' || insurancePlanId === 'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø·Ø±Ø­â€ŒÙ‡Ø§...') {
                    e.preventDefault();
                    showWarning('Ù„Ø·ÙØ§Ù‹ Ø·Ø±Ø­ Ø¨ÛŒÙ…Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
                    return false;
                }
                
                // Ø§Ú¯Ø± Ø³Ø±ÙØµÙ„ Ø®Ø¯Ù…Øª Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡ Ùˆ Ø®Ø¯Ù…Øª Ù‡Ù… Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡
                if ((!serviceCategoryId || serviceCategoryId === '' || serviceCategoryId === 'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø³Ø±ÙØµÙ„â€ŒÙ‡Ø§...') && 
                    (!serviceId || serviceId === '' || serviceId === 'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø®Ø¯Ù…Ø§Øª...')) {
                    e.preventDefault();
                    showWarning('Ù„Ø·ÙØ§Ù‹ Ø³Ø±ÙØµÙ„ Ø®Ø¯Ù…Øª ÛŒØ§ Ø®Ø¯Ù…Øª Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
                    return false;
                }
                
                // Ù¾Ø±Ø¯Ø§Ø²Ø´ "Ù‡Ù…Ù‡ Ø®Ø¯Ù…Ø§Øª"
                if (serviceId === 'all') {
                    $('#ServiceId').val('');
                    $('#IsAllServices').val('true');
                    console.log('ğŸ”„ Ù…Ù‚Ø¯Ø§Ø± "Ù‡Ù…Ù‡ Ø®Ø¯Ù…Ø§Øª" Ø¨Ù‡ Ø®Ø§Ù„ÛŒ ØªØ¨Ø¯ÛŒÙ„ Ø´Ø¯ Ùˆ IsAllServices = true');
                } else {
                    $('#IsAllServices').val('false');
                }
                
                // Ù¾Ø±Ø¯Ø§Ø²Ø´ "Ù‡Ù…Ù‡ Ø³Ø±ÙØµÙ„â€ŒÙ‡Ø§"
                if (serviceCategoryId === 'all') {
                    $('#ServiceCategoryId').val('');
                    $('#IsAllServiceCategories').val('true');
                    console.log('ğŸ”„ Ù…Ù‚Ø¯Ø§Ø± "Ù‡Ù…Ù‡ Ø³Ø±ÙØµÙ„â€ŒÙ‡Ø§" Ø¨Ù‡ Ø®Ø§Ù„ÛŒ ØªØ¨Ø¯ÛŒÙ„ Ø´Ø¯ Ùˆ IsAllServiceCategories = true');
                } else {
                    $('#IsAllServiceCategories').val('false');
                }
                
                // Debug: Ù†Ù…Ø§ÛŒØ´ Ù…Ù‚Ø§Ø¯ÛŒØ± Ù†Ù‡Ø§ÛŒÛŒ
                console.log('ğŸ” Ù…Ù‚Ø§Ø¯ÛŒØ± Ù†Ù‡Ø§ÛŒÛŒ Ù‚Ø¨Ù„ Ø§Ø² Ø§Ø±Ø³Ø§Ù„:');
                console.log('DepartmentId:', $('#DepartmentId').val());
                console.log('ServiceCategoryId:', $('#ServiceCategoryId').val());
                console.log('ServiceId:', $('#ServiceId').val());
                console.log('IsAllServices:', $('#IsAllServices').val());
                console.log('IsAllServiceCategories:', $('#IsAllServiceCategories').val());
                console.log('InsuranceProviderId:', $('#InsuranceProviderId').val());
                console.log('InsurancePlanId:', $('#InsurancePlanId').val());
                console.log('TariffPrice:', $('#TariffPrice').val());
                console.log('PatientShare:', $('#PatientShare').val());
                console.log('InsurerShare:', $('#InsurerShare').val());
                
                console.log('âœ… ÙØ±Ù… Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø±Ø³Ø§Ù„ Ø§Ø³Øª');
                $(this).addClass('was-validated');
            });
        });
    </script>
}
