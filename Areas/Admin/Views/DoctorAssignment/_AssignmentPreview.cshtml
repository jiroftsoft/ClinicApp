@model ClinicApp.ViewModels.DoctorManagementVM.AssignmentPreviewViewModel

<div class="assignment-preview">
    <!-- اطلاعات پزشک -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card border-primary">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-user-md"></i>
                        اطلاعات پزشک
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3">
                            <strong>نام:</strong> @Model.Doctor.FullName
                        </div>
                        <div class="col-md-3">
                            <strong>کد ملی:</strong> @Model.Doctor.NationalCode
                        </div>
                        <div class="col-md-3">
                            <strong>تخصص:</strong> @Model.Doctor.Specialization
                        </div>
                        <div class="col-md-3">
                            <strong>تلفن:</strong> @Model.Doctor.PhoneNumber
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- دپارتمان‌های انتخاب شده -->
    @if (Model.DepartmentAssignments.Any())
    {
        <div class="row mb-4">
            <div class="col-12">
                <div class="card border-info">
                    <div class="card-header bg-info text-white">
                        <h5 class="mb-0">
                            <i class="fas fa-building"></i>
                            دپارتمان‌های انتخاب شده (@Model.DepartmentAssignments.Count)
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            @foreach (var dept in Model.DepartmentAssignments)
                            {
                                <div class="col-md-6 mb-3">
                                    <div class="card border-light">
                                        <div class="card-body">
                                            <h6 class="card-title">
                                                <i class="fas fa-hospital"></i>
                                                @dept.Name
                                            </h6>
                                            @if (!string.IsNullOrEmpty(dept.Description))
                                            {
                                                <p class="card-text text-muted">@dept.Description</p>
                                            }
                                            <div class="row">
                                                <div class="col-6">
                                                    <small class="text-muted">
                                                        <strong>نقش:</strong> @(dept.Role ?? "نامشخص")
                                                    </small>
                                                </div>
                                                <div class="col-6">
                                                    <small class="text-muted">
                                                        <strong>تاریخ:</strong> @(dept.AssignmentDate ?? "فوری")
                                                    </small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }

    <!-- سرفصل‌های خدماتی انتخاب شده -->
    @if (Model.ServiceCategoryAssignments.Any())
    {
        <div class="row mb-4">
            <div class="col-12">
                <div class="card border-success">
                    <div class="card-header bg-success text-white">
                        <h5 class="mb-0">
                            <i class="fas fa-stethoscope"></i>
                            سرفصل‌های خدماتی انتخاب شده (@Model.ServiceCategoryAssignments.Count)
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            @foreach (var service in Model.ServiceCategoryAssignments)
                            {
                                <div class="col-md-6 mb-3">
                                    <div class="card border-light">
                                        <div class="card-body">
                                            <h6 class="card-title">
                                                <i class="fas fa-medkit"></i>
                                                @service.Name
                                            </h6>
                                            @if (!string.IsNullOrEmpty(service.Description))
                                            {
                                                <p class="card-text text-muted">@service.Description</p>
                                            }
                                            <div class="row">
                                                <div class="col-6">
                                                    <small class="text-muted">
                                                        <strong>سطح مجوز:</strong> @(service.AuthorizationLevel ?? "پایه")
                                                    </small>
                                                </div>
                                                <div class="col-6">
                                                    <small class="text-muted">
                                                        <strong>شماره گواهی:</strong> @(service.CertificateNumber ?? "در انتظار")
                                                    </small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }

    <!-- یادداشت‌ها -->
    @if (!string.IsNullOrEmpty(Model.Notes))
    {
        <div class="row mb-4">
            <div class="col-12">
                <div class="card border-warning">
                    <div class="card-header bg-warning text-dark">
                        <h5 class="mb-0">
                            <i class="fas fa-sticky-note"></i>
                            یادداشت‌ها
                        </h5>
                    </div>
                    <div class="card-body">
                        <p class="mb-0">@Model.Notes</p>
                    </div>
                </div>
            </div>
        </div>
    }

    <!-- خلاصه -->
    <div class="row">
        <div class="col-12">
            <div class="card border-secondary">
                <div class="card-header bg-secondary text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-list-alt"></i>
                        خلاصه انتساب
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="text-center">
                                <h4 class="text-primary">@Model.DepartmentAssignments.Count</h4>
                                <small class="text-muted">دپارتمان</small>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center">
                                <h4 class="text-success">@Model.ServiceCategoryAssignments.Count</h4>
                                <small class="text-muted">سرفصل خدماتی</small>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center">
                                <h4 class="text-info">@Model.TotalAssignments</h4>
                                <small class="text-muted">کل انتسابات</small>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center">
                                @if (Model.ApplyImmediately)
                                {
                                    <h4 class="text-warning">
                                        <i class="fas fa-bolt"></i>
                                    </h4>
                                    <small class="text-muted">اعمال فوری</small>
                                }
                                else
                                {
                                    <h4 class="text-secondary">
                                        <i class="fas fa-clock"></i>
                                    </h4>
                                    <small class="text-muted">در انتظار تأیید</small>
                                }
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>