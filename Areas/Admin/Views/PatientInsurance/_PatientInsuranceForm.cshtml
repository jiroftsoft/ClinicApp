@model ClinicApp.ViewModels.Insurance.PatientInsurance.PatientInsuranceCreateEditViewModel

<!-- 🏥 Medical Environment: Patient Selection Section -->
<div class="medical-form-section">
    <h4 class="medical-section-title">
        <i class="fas fa-user-plus"></i>
        انتخاب بیمار
        <span class="required-indicator">*</span>
    </h4>
    
    <div class="patient-selection-container">
        <div class="form-group">
            <label class="form-label">انتخاب بیمار:</label>
            @Html.DropDownListFor(m => m.PatientId, new List<SelectListItem>(), "جستجو و انتخاب بیمار...", new { 
                @class = "form-control patient-select2-advanced", 
                required = "required",
                id = "PatientId",
                data_placeholder = "جستجو در بیماران: نام، نام خانوادگی، کد ملی یا شماره تلفن...",
                data_allow_clear = "true",
                data_medical_field = "patient-selection"
            })
            @Html.ValidationMessageFor(m => m.PatientId, "", new { @class = "text-danger" })
        </div>
        
        <!-- نمایش اطلاعات بیمار انتخاب شده -->
        <div class="selected-patient-info" id="selectedPatientInfo" style="display: none;">
            <div class="card border-success">
                <div class="card-header bg-success text-white">
                    <h6 class="mb-0">
                        <i class="fas fa-user-check"></i> بیمار انتخاب شده
                    </h6>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="patient-avatar-large">
                                <i class="fas fa-user"></i>
                            </div>
                        </div>
                        <div class="col-md-9">
                            <div class="patient-details-complete">
                                <h5 class="patient-name" id="selectedPatientName">نام بیمار</h5>
                                <div class="row">
                                    <div class="col-md-6">
                                        <strong>نام و نام خانوادگی:</strong> <span id="selectedPatientFullName">-</span>
                                    </div>
                                    <div class="col-md-6">
                                        <strong>کد ملی:</strong> <span id="selectedPatientNationalCode">-</span>
                                    </div>
                                </div>
                                <div class="row mt-2">
                                    <div class="col-md-6">
                                        <strong>نام پدر:</strong> <span id="selectedPatientFatherName">-</span>
                                    </div>
                                    <div class="col-md-6">
                                        <strong>شماره تلفن:</strong> <span id="selectedPatientPhone">-</span>
                                    </div>
                                </div>
                                <div class="row mt-2">
                                    <div class="col-md-6">
                                        <strong>تاریخ تولد و سن:</strong> <span id="selectedPatientBirthDate">-</span>
                                    </div>
                                    <div class="col-md-6">
                                        <strong>جنسیت:</strong> <span id="selectedPatientGender">-</span>
                                    </div>
                                </div>
                                <div class="row mt-2" id="additionalPatientInfo" style="display: none;">
                                    <div class="col-md-12">
                                        <strong>آدرس:</strong> <span id="selectedPatientAddress">-</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 🏥 Medical Environment: Insurance Selection Section -->
<div class="medical-form-section">
    <h4 class="medical-section-title">
        <i class="fas fa-shield-alt"></i>
        انتخاب نوع بیمه
        <span class="required-indicator">*</span>
    </h4>
    
    <div class="insurance-selection-container">
        <div class="insurance-type-tabs">
            <div class="insurance-tab active" data-type="primary">
                <i class="fas fa-star me-2"></i>
                بیمه پایه (اصلی)
            </div>
            <div class="insurance-tab" data-type="supplementary">
                <i class="fas fa-plus-circle me-2"></i>
                بیمه تکمیلی
            </div>
        </div>
        
        <!-- بیمه پایه -->
        <div class="insurance-content active" id="primaryInsuranceContent">
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="form-label">انتخاب بیمه‌گذار پایه:</label>
                        <select id="PrimaryInsuranceProviderId" 
                                name="InsuranceProviderId" 
                                class="form-control medical-form-control" 
                                required="required"
                                data_medical_field = "insurance-provider">
                            <option value="">انتخاب بیمه‌گذار پایه</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="form-label">انتخاب طرح بیمه پایه:</label>
                        <select id="PrimaryInsurancePlanId" 
                                name="InsurancePlanId" 
                                class="form-control medical-form-control" 
                                required="required"
                                data_medical_field = "insurance-plan"
                                disabled>
                            <option value="">ابتدا بیمه‌گذار را انتخاب کنید</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="form-label">شماره بیمه‌نامه:</label>
                        <input type="text" 
                               id="PolicyNumber" 
                               name="PolicyNumber" 
                               class="form-control medical-form-control" 
                               placeholder="خودکار با کد ملی پر می‌شود"
                               readonly
                               data_medical_field = "policy-number">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="form-label">شماره بیمه‌نامه (تکمیلی):</label>
                        <input type="text" 
                               id="SupplementaryPolicyNumber" 
                               name="SupplementaryPolicyNumber" 
                               class="form-control medical-form-control" 
                               placeholder="اختیاری - برای بیمه تکمیلی"
                               data_medical_field = "supplementary-policy-number">
                    </div>
                </div>
            </div>
        </div>
        
        <!-- بیمه تکمیلی (اختیاری) -->
        <div class="insurance-content" id="supplementaryInsuranceContent">
            <div class="alert alert-info">
                <i class="fas fa-info-circle"></i>
                <strong>نکته:</strong> بیمه تکمیلی اختیاری است. در صورت نیاز می‌توانید بیمه تکمیلی اضافه کنید.
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="form-label">انتخاب بیمه‌گذار تکمیلی:</label>
                        <select id="SupplementaryInsuranceProviderId" 
                                name="SupplementaryInsuranceProviderId" 
                                class="form-control medical-form-control" 
                                data_medical_field = "supplementary-insurance-provider"
                                data-optional="true">
                            <option value="">انتخاب بیمه‌گذار تکمیلی (اختیاری)</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="form-label">انتخاب طرح بیمه تکمیلی:</label>
                        <select id="SupplementaryInsurancePlanId" 
                                name="SupplementaryInsurancePlanId" 
                                class="form-control medical-form-control" 
                                data_medical_field = "supplementary-insurance-plan"
                                data-optional="true"
                                disabled>
                            <option value="">ابتدا بیمه‌گذار تکمیلی را انتخاب کنید</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 🏥 Medical Environment: Insurance Details Section -->
<div class="medical-form-section">
    <h4 class="medical-section-title">
        <i class="fas fa-calendar-alt"></i>
        جزئیات بیمه
    </h4>
    
    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                <label class="form-label">تاریخ شروع اعتبار:</label>
                @Html.TextBoxFor(m => m.StartDateShamsi, new { 
                    @class = "form-control persian-datepicker medical-form-control", 
                    placeholder = "تاریخ شروع اعتبار (شمسی)", 
                    required = "required",
                    id = "StartDateShamsi",
                    data_medical_field = "start-date"
                })
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label class="form-label">تاریخ پایان اعتبار:</label>
                @Html.TextBoxFor(m => m.EndDateShamsi, new { 
                    @class = "form-control persian-datepicker medical-form-control", 
                    placeholder = "تاریخ پایان اعتبار (شمسی)", 
                    required = "required",
                    id = "EndDateShamsi",
                    data_medical_field = "end-date"
                })
            </div>
        </div>
    </div>
    
    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                <div class="form-check">
                    @Html.CheckBoxFor(m => m.IsPrimary, new { 
                        @class = "form-check-input",
                        id = "IsPrimary",
                        data_medical_field = "is-primary"
                    })
                    <label class="form-check-label" for="IsPrimary">
                        بیمه اصلی
                    </label>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <div class="form-check">
                    @Html.CheckBoxFor(m => m.IsActive, new { 
                        @class = "form-check-input",
                        id = "IsActive",
                        data_medical_field = "is-active"
                    })
                    <label class="form-check-label" for="IsActive">
                        بیمه فعال
                    </label>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 🏥 Medical Environment: Hidden Fields -->
@Html.HiddenFor(m => m.StartDate)
@Html.HiddenFor(m => m.EndDate)