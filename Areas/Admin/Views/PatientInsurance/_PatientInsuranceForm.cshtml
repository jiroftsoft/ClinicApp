@model ClinicApp.ViewModels.Insurance.PatientInsurance.PatientInsuranceCreateEditViewModel

<!-- ๐ฅ Medical Environment: Patient Selection Section (Edit Mode - Read Only) -->
<div class="medical-form-section">
    <h4 class="medical-section-title">
        <i class="fas fa-user-edit"></i>
        ุงุทูุงุนุงุช ุจูุงุฑ (ูุฑุงุด)
        <span class="edit-mode-indicator">ูุฑุงุด</span>
    </h4>
    
    <div class="patient-selection-container">
        <!-- ๐ฅ Medical Environment: Patient Info Display (Read Only) -->
        <div class="selected-patient-info" id="selectedPatientInfo" style="display: block;">
            <div class="card border-primary">
                <div class="card-header bg-primary text-white">
                    <h6 class="mb-0">
                        <i class="fas fa-user-check"></i> ุจูุงุฑ ุฏุฑ ุญุงู ูุฑุงุด
                    </h6>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="patient-avatar-large">
                                <i class="fas fa-user"></i>
                            </div>
                        </div>
                        <div class="col-md-9">
                            <div class="patient-details-complete">
                                <h5 class="patient-name" id="selectedPatientName">@Model.PatientName</h5>
                                <div class="row">
                                    <div class="col-md-6">
                                        <strong>ูุงู ู ูุงู ุฎุงููุงุฏฺฏ:</strong> <span id="selectedPatientFullName">@Model.PatientName</span>
                                    </div>
                                    <div class="col-md-6">
                                        <strong>ฺฉุฏ ูู:</strong> <span id="selectedPatientNationalCode">@Model.PatientNationalCode</span>
                                    </div>
                                </div>
                                <div class="row mt-2">
                                    <div class="col-md-6">
                                        <strong>ุดูุงุฑู ุชููู:</strong> <span id="selectedPatientPhone">@Model.PatientPhone</span>
                                    </div>
                                    <div class="col-md-6">
                                        <strong>ุชุงุฑุฎ ุชููุฏ:</strong> <span id="selectedPatientBirthDate">@Model.PatientBirthDate</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ๐ฅ Medical Environment: Hidden Patient ID (Read Only) -->
        <div class="form-group" style="display: none;">
            <label class="form-label">ุดูุงุณู ุจูุงุฑ:</label>
            @Html.TextBoxFor(m => m.PatientId, new { 
                @class = "form-control", 
                @readonly = "readonly",
                id = "PatientId"
            })
        </div>
        
        <!-- ููุงุด ุงุทูุงุนุงุช ุจูุงุฑ ุงูุชุฎุงุจ ุดุฏู -->
        <div class="selected-patient-info" id="selectedPatientInfo" style="display: none;">
            <div class="card border-success">
                <div class="card-header bg-success text-white">
                    <h6 class="mb-0">
                        <i class="fas fa-user-check"></i> ุจูุงุฑ ุงูุชุฎุงุจ ุดุฏู
                    </h6>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="patient-avatar-large">
                                <i class="fas fa-user"></i>
                            </div>
                        </div>
                        <div class="col-md-9">
                            <div class="patient-details-complete">
                                <h5 class="patient-name" id="selectedPatientName">ูุงู ุจูุงุฑ</h5>
                                <div class="row">
                                    <div class="col-md-6">
                                        <strong>ูุงู ู ูุงู ุฎุงููุงุฏฺฏ:</strong> <span id="selectedPatientFullName">-</span>
                                    </div>
                                    <div class="col-md-6">
                                        <strong>ฺฉุฏ ูู:</strong> <span id="selectedPatientNationalCode">-</span>
                                    </div>
                                </div>
                                <div class="row mt-2">
                                    <div class="col-md-6">
                                        <strong>ูุงู ูพุฏุฑ:</strong> <span id="selectedPatientFatherName">-</span>
                                    </div>
                                    <div class="col-md-6">
                                        <strong>ุดูุงุฑู ุชููู:</strong> <span id="selectedPatientPhone">-</span>
                                    </div>
                                </div>
                                <div class="row mt-2">
                                    <div class="col-md-6">
                                        <strong>ุชุงุฑุฎ ุชููุฏ ู ุณู:</strong> <span id="selectedPatientBirthDate">-</span>
                                    </div>
                                    <div class="col-md-6">
                                        <strong>ุฌูุณุช:</strong> <span id="selectedPatientGender">-</span>
                                    </div>
                                </div>
                                <div class="row mt-2" id="additionalPatientInfo" style="display: none;">
                                    <div class="col-md-12">
                                        <strong>ุขุฏุฑุณ:</strong> <span id="selectedPatientAddress">-</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ๐ฅ Medical Environment: Insurance Selection Section -->
<div class="medical-form-section">
    <h4 class="medical-section-title">
        <i class="fas fa-shield-alt"></i>
        ุงูุชุฎุงุจ ููุน ุจูู
        <span class="required-indicator">*</span>
    </h4>
    
    <div class="insurance-selection-container">
        <div class="insurance-type-tabs">
            <div class="insurance-tab active" data-type="primary">
                <i class="fas fa-star me-2"></i>
                ุจูู ูพุงู (ุงุตู)
            </div>
            <div class="insurance-tab" data-type="supplementary">
                <i class="fas fa-plus-circle me-2"></i>
                ุจูู ุชฺฉูู
            </div>
        </div>
        
        <!-- ุจูู ูพุงู -->
        <div class="insurance-content active" id="primaryInsuranceContent">
            <div class="alert alert-info">
                <i class="fas fa-info-circle"></i>
                <strong>ุจูู ูพุงู:</strong> ุงู ุจูู ุงุตู ุจูุงุฑ ุงุณุช ู ูุงุจู ุชุบุฑ ูโุจุงุดุฏ.
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="form-label">ุงูุชุฎุงุจ ุจููโฺฏุฐุงุฑ ูพุงู:</label>
                        <select id="InsuranceProviderId" 
                                name="InsuranceProviderId" 
                                class="form-control medical-form-control" 
                                required="required"
                                data_medical_field = "insurance-provider">
                            <option value="">ุงูุชุฎุงุจ ุจููโฺฏุฐุงุฑ ูพุงู</option>
                        </select>
                        <small class="form-text text-muted">ุจููโฺฏุฐุงุฑ ูุนู: <strong id="currentPrimaryProvider">@Model.InsuranceProviderName</strong></small>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="form-label">ุงูุชุฎุงุจ ุทุฑุญ ุจูู ูพุงู:</label>
                        <select id="InsurancePlanId" 
                                name="InsurancePlanId" 
                                class="form-control medical-form-control" 
                                required="required"
                                data_medical_field = "insurance-plan"
                                disabled>
                            <option value="">ุงุจุชุฏุง ุจููโฺฏุฐุงุฑ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ</option>
                        </select>
                        <small class="form-text text-muted">ุทุฑุญ ูุนู: <strong id="currentPrimaryPlan">@Model.InsurancePlanName</strong></small>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="form-label">ุดูุงุฑู ุจููโูุงูู:</label>
                        <input type="text" 
                               id="PolicyNumber" 
                               name="PolicyNumber" 
                               class="form-control medical-form-control" 
                               placeholder="ุฎูุฏฺฉุงุฑ ุจุง ฺฉุฏ ูู ูพุฑ ูโุดูุฏ"
                               readonly
                               data_medical_field = "policy-number">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="form-label">ุดูุงุฑู ุจููโูุงูู (ุชฺฉูู):</label>
                        <input type="text" 
                               id="SupplementaryPolicyNumber" 
                               name="SupplementaryPolicyNumber" 
                               class="form-control medical-form-control" 
                               placeholder="ุงุฎุชุงุฑ - ุจุฑุง ุจูู ุชฺฉูู"
                               data_medical_field = "supplementary-policy-number">
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ุจูู ุชฺฉูู (ุงุฎุชุงุฑ) -->
        <div class="insurance-content" id="supplementaryInsuranceContent">
            @if (Model.SupplementaryInsuranceProviderId.HasValue)
            {
                <div class="alert alert-success">
                    <i class="fas fa-check-circle"></i>
                    <strong>ุจูู ุชฺฉูู ููุฌูุฏ:</strong> ุงู ุจูุงุฑ ุฏุงุฑุง ุจูู ุชฺฉูู ุงุณุช ู ูุงุจู ุชุบุฑ ูโุจุงุดุฏ.
                </div>
            }
            else
            {
                <div class="alert alert-warning">
                    <i class="fas fa-exclamation-triangle"></i>
                    <strong>ุจูู ุชฺฉูู:</strong> ุงู ุจูุงุฑ ุจูู ุชฺฉูู ูุฏุงุฑุฏ. ุฏุฑ ุตูุฑุช ูุงุฒ ูโุชูุงูุฏ ุจูู ุชฺฉูู ุงุถุงูู ฺฉูุฏ.
                </div>
            }
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="form-label">ุงูุชุฎุงุจ ุจููโฺฏุฐุงุฑ ุชฺฉูู:</label>
                        <select id="SupplementaryInsuranceProviderId" 
                                name="SupplementaryInsuranceProviderId" 
                                class="form-control medical-form-control" 
                                data_medical_field = "supplementary-insurance-provider"
                                data-optional="true">
                            <option value="">ุงูุชุฎุงุจ ุจููโฺฏุฐุงุฑ ุชฺฉูู (ุงุฎุชุงุฑ)</option>
                        </select>
                        @if (Model.SupplementaryInsuranceProviderId.HasValue)
                        {
                            <small class="form-text text-muted">ุจููโฺฏุฐุงุฑ ูุนู: <strong id="currentSupplementaryProvider">@Model.SupplementaryInsuranceProviderName</strong></small>
                        }
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="form-label">ุงูุชุฎุงุจ ุทุฑุญ ุจูู ุชฺฉูู:</label>
                        <select id="SupplementaryInsurancePlanId" 
                                name="SupplementaryInsurancePlanId" 
                                class="form-control medical-form-control" 
                                data_medical_field = "supplementary-insurance-plan"
                                data-optional="true"
                                disabled>
                            <option value="">ุงุจุชุฏุง ุจููโฺฏุฐุงุฑ ุชฺฉูู ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ</option>
                        </select>
                        @if (Model.SupplementaryInsurancePlanId.HasValue)
                        {
                            <small class="form-text text-muted">ุทุฑุญ ูุนู: <strong id="currentSupplementaryPlan">@Model.SupplementaryInsurancePlanName</strong></small>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ๐ฅ Medical Environment: Insurance Details Section -->
<div class="medical-form-section">
    <h4 class="medical-section-title">
        <i class="fas fa-calendar-alt"></i>
        ุฌุฒุฆุงุช ุจูู
    </h4>
    
    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                <label class="form-label">ุชุงุฑุฎ ุดุฑูุน ุงุนุชุจุงุฑ:</label>
                @Html.TextBoxFor(m => m.StartDateShamsi, new { 
                    @class = "form-control persian-datepicker medical-form-control", 
                    placeholder = "ุชุงุฑุฎ ุดุฑูุน ุงุนุชุจุงุฑ (ุดูุณ)", 
                    required = "required",
                    id = "StartDateShamsi",
                    data_medical_field = "start-date"
                })
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label class="form-label">ุชุงุฑุฎ ูพุงุงู ุงุนุชุจุงุฑ:</label>
                @Html.TextBoxFor(m => m.EndDateShamsi, new { 
                    @class = "form-control persian-datepicker medical-form-control", 
                    placeholder = "ุชุงุฑุฎ ูพุงุงู ุงุนุชุจุงุฑ (ุดูุณ)", 
                    required = "required",
                    id = "EndDateShamsi",
                    data_medical_field = "end-date"
                })
            </div>
        </div>
    </div>
    
    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                <div class="form-check">
                    @Html.CheckBoxFor(m => m.IsPrimary, new { 
                        @class = "form-check-input",
                        id = "IsPrimary",
                        data_medical_field = "is-primary"
                    })
                    <label class="form-check-label" for="IsPrimary">
                        ุจูู ุงุตู
                    </label>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <div class="form-check">
                    @Html.CheckBoxFor(m => m.IsActive, new { 
                        @class = "form-check-input",
                        id = "IsActive",
                        data_medical_field = "is-active"
                    })
                    <label class="form-check-label" for="IsActive">
                        ุจูู ูุนุงู
                    </label>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ๐ฅ Medical Environment: Hidden Fields -->
@Html.HiddenFor(m => m.StartDate)
@Html.HiddenFor(m => m.EndDate)