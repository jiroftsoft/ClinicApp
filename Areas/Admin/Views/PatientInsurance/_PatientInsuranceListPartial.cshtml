@model ClinicApp.ViewModels.Insurance.PatientInsurance.PatientInsuranceListPartialViewModel

@{
    Layout = null;
}

@if (Model != null && Model.Items.Any())
{
    <div class="patient-insurance-list">
        @foreach (var patientInsurance in Model.Items)
        {
            <div class="col-md-6 col-lg-4 mb-4">
                @Html.Partial("_PatientInsuranceCard", patientInsurance)
            </div>
        }
    </div>
    
    <!-- Pagination -->
    if (Model.TotalPages > 1)
    {
        <div class="pagination-container mt-4">
            <nav aria-label="صفحه‌بندی بیمه‌های بیماران">
                <ul class="pagination justify-content-center">
                    <!-- Previous Page -->
                    @if (Model.HasPreviousPage)
                    {
                        <li class="page-item">
                            <a class="page-link" href="#" data-page="@Model.PreviousPage" aria-label="قبلی">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                    }
                    
                    <!-- Page Numbers -->
                    @{
                        int startPage = System.Math.Max(1, Model.CurrentPage - 2);
                        int endPage = System.Math.Min(Model.TotalPages, Model.CurrentPage + 2);
                    }
                    
                    @for (int i = startPage; i <= endPage; i++)
                    {
                        <li class="page-item @(i == Model.CurrentPage ? "active" : "")">
                            <a class="page-link" href="#" data-page="@i">@i</a>
                        </li>
                    }
                    
                    <!-- Next Page -->
                    @if (Model.HasNextPage)
                    {
                        <li class="page-item">
                            <a class="page-link" href="#" data-page="@Model.NextPage" aria-label="بعدی">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                    }
                </ul>
            </nav>
            
            <!-- Page Info -->
            <div class="pagination-info text-center mt-2">
                <small class="text-muted">
                    نمایش @((Model.CurrentPage - 1) * Model.PageSize + 1) تا @(System.Math.Min(Model.CurrentPage * Model.PageSize, Model.TotalItems)) 
                    از @Model.TotalItems رکورد
                </small>
            </div>
        </div>
    }
}
else
{
    <!-- Empty State -->
    <div class="empty-state text-center py-5">
        <div class="empty-state-icon">
            <i class="fas fa-shield-alt fa-3x text-muted"></i>
        </div>
        <h4 class="empty-state-title mt-3">هیچ بیمه‌ای یافت نشد</h4>
        <p class="empty-state-description text-muted">
            در حال حاضر هیچ بیمه‌ای برای نمایش وجود ندارد.
        </p>
        <div class="empty-state-actions mt-4">
            <a href="@Url.Action("Create", "PatientInsurance")" class="btn btn-primary">
                <i class="fas fa-plus"></i> افزودن بیمه جدید
            </a>
        </div>
    </div>
}

