@model IEnumerable<ClinicApp.ViewModels.Insurance.InsurancePlan.InsurancePlanIndexViewModel>

@if (Model != null && Model.Any())
{
    <div class="row" id="insurance-plans-list">
        @foreach (var plan in Model)
        {
            <div class="col-md-6 col-lg-4">
                <div class="insurance-plan-card">
                    <div class="plan-header">
                        <div class="plan-name">@plan.Name</div>
                        <div class="d-flex justify-content-between align-items-center">
                            <span class="plan-code">@plan.PlanCode</span>
                            <span class="provider-badge">@plan.InsuranceProviderName</span>
                        </div>
                    </div>

                    <div class="coverage-info">
                        <div class="row text-center">
                            <div class="col-6">
                                <div class="coverage-percent">@plan.CoveragePercent%</div>
                                <small class="text-muted">پوشش بیمه</small>
                            </div>
                            <div class="col-6">
                                <div class="deductible-amount">@plan.Deductible.ToString("N0")</div>
                                <small class="text-muted">فرانشیز (تومان)</small>
                            </div>
                        </div>
                    </div>

                    <div class="validity-period">
                        <div class="validity-label">دوره اعتبار:</div>
                        <div class="validity-date">
                            از @plan.ValidFromShamsi تا @plan.ValidToShamsi
                        </div>
                    </div>

                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <div>
                            @if (plan.IsActive)
                            {
                                <span class="badge badge-success status-badge">
                                    <i class="fas fa-check-circle"></i> فعال
                                </span>
                            }
                            else
                            {
                                <span class="badge badge-danger status-badge">
                                    <i class="fas fa-times-circle"></i> غیرفعال
                                </span>
                            }
                        </div>
                        <div>
                            <span class="badge badge-info">@plan.PlanServiceCount خدمت</span>
                        </div>
                    </div>

                    <div class="text-center">
                        <a href="@Url.Action("Details", "InsurancePlan", new { id = plan.InsurancePlanId })" 
                           class="btn btn-info btn-sm btn-action" 
                           data-tooltip="مشاهده جزئیات کامل طرح بیمه">
                            <i class="fas fa-eye"></i> جزئیات
                        </a>
                        <a href="@Url.Action("Edit", "InsurancePlan", new { id = plan.InsurancePlanId })" 
                           class="btn btn-warning btn-sm btn-action" 
                           data-tooltip="ویرایش اطلاعات طرح بیمه">
                            <i class="fas fa-edit"></i> ویرایش
                        </a>
                        <a href="@Url.Action("Delete", "InsurancePlan", new { id = plan.InsurancePlanId })" 
                           class="btn btn-danger btn-sm btn-action" 
                           data-tooltip="حذف طرح بیمه از سیستم">
                            <i class="fas fa-trash-alt"></i> حذف
                        </a>
                    </div>
                </div>
            </div>
        }
    </div>
}
else
{
    <div class="row">
        <div class="col-12">
            <div class="alert alert-warning text-center">
                <i class="fas fa-exclamation-triangle fa-3x mb-3"></i>
                <h4>هیچ طرح بیمه‌ای یافت نشد</h4>
                <p>در حال حاضر هیچ طرح بیمه‌ای در سیستم ثبت نشده است.</p>
                <a href="@Url.Action("Create", "InsurancePlan")" 
                   class="btn btn-primary" 
                   data-tooltip="ایجاد اولین طرح بیمه در سیستم">
                    <i class="fas fa-plus"></i> افزودن اولین طرح بیمه
                </a>
            </div>
        </div>
    </div>
}
