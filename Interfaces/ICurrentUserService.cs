using System;
using System.Threading.Tasks;

namespace ClinicApp.Interfaces;

/// <summary>
/// رابط برای دسترسی به اطلاعات کاربر جاری در کل سیستم
/// این رابط امکان دسترسی ایمن به اطلاعات کاربر فعلی را در تمام لایه‌های برنامه فراهم می‌کند
/// 
/// ویژگی‌های کلیدی:
/// 1. جداسازی کامل از سیستم احراز هویت
/// 2. امکان تست‌پذیری آسان سرویس‌ها
/// 3. رعایت استانداردهای امنیتی پزشکی
/// 4. پشتیبانی از همه سناریوهای کاربری (وب، API، پس‌زمینه)
/// </summary>
public interface ICurrentUserService
{
    /// <summary>
    /// شناسه کاربر جاری در سیستم
    /// برای سیستم‌های پزشکی بسیار حیاتی است چون:
    /// - برای ردیابی تغییرات (Audit Trail) استفاده می‌شود
    /// - برای تعیین دسترسی‌های کاربران به اطلاعات حساس پزشکی
    /// - برای گزارش‌گیری و تحلیل‌های عملکردی
    /// </summary>
    string UserId { get; }

    /// <summary>
    /// نام کاربری کاربر جاری
    /// برای نمایش در UI و لاگ‌ها استفاده می‌شود
    /// </summary>
    string UserName { get; }

    /// <summary>
    /// آیا کاربر جاری احراز هویت شده است؟
    /// برای بررسی سریع وضعیت احراز هویت کاربر
    /// </summary>
    bool IsAuthenticated { get; }

    /// <summary>
    /// آیا کاربر جاری در نقش مدیر سیستم است؟
    /// برای بررسی سریع دسترسی‌های سطح بالا
    /// </summary>
    bool IsAdmin { get; }

    /// <summary>
    /// آیا کاربر جاری پزشک است؟
    /// برای بررسی سریع دسترسی‌های پزشکی
    /// </summary>
    bool IsDoctor { get; }

    /// <summary>
    /// آیا کاربر جاری منشی است؟
    /// برای بررسی سریع دسترسی‌های پذیرش
    /// </summary>
    bool IsReceptionist { get; }

    /// <summary>
    /// زمان فعلی سیستم به صورت UTC
    /// برای استفاده در تمام عملیات تاریخ‌محور سیستم
    /// رعایت استانداردهای پزشکی و مالی
    /// </summary>
    DateTime UtcNow { get; }

    /// <summary>
    /// بررسی دسترسی کاربر جاری به یک خدمات خاص
    /// این متد برای سیستم‌های پزشکی کلینیک شفا طراحی شده است
    /// </summary>
    /// <param name="serviceId">شناسه خدمات</param>
    /// <returns>آیا کاربر به این خدمات دسترسی دارد؟</returns>
    Task<bool> HasAccessToServiceAsync(int serviceId);
}